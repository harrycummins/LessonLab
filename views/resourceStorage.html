<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>resourceStorage</title>
        <!-- <link rel="stylesheet" href="resourceStorage.css"> -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    </head>
<body>
    <style>
        body {
          display: flex;
          min-height: 100vh;
          overflow-x: hidden;
        }
        .sidebar {
          min-width: 250px;
          max-width: 250px;
          height: 100vh;
        }
        .content {
          flex-grow: 1;
          padding: 20px;
        }
        .html{
            background-color: red;
        }
      </style>

      <!-- Sidebar -->
  <nav class="sidebar bg-dark text-white d-flex flex-column p-3">
    <h3 class="mb-4">Resource Storage</h3>
    <ul class="nav flex-column">
      <li class="nav-item">
        <a href="/toDo" class="nav-link text-white">To Do List</a>
      </li>
      <li class="nav-item">
        <a href="/calender" class="nav-link text-white">calender</a>
      </li>
      <li class="nav-item">
        <a href="#" class="nav-link text-white">Settings</a>
      </li>
      <li class="nav-item">
        <a href="/home.html" class="nav-link text-white">Back to home</a>
      </li>
      <button class="btn btn-primary d-md-none" data-bs-toggle="collapse" data-bs-target="#sidebar">
        Toggle Sidebar
      </button>
    
    </ul>
    
  </nav>
<!--   
      <div class="container">
        <h1>lesson Planner</h1>
<h2>Submit Your Data</h2>
<form id="myForm">
<div class="row">
    <div class="col-md-6">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br><br>
    </div>
    <div class="col-md-6">
        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required><br><br>
    </div>
     <div class="col-md-10">
    <label for="lessonDetail" class="form-label">Lesson Details</label>
    <input type="lessonDetail" class="form-control" id="lessonDetail">
  </div>
  </div>
  <button type = "favourite">Favourite</button>
  <button type="submit">Submit</button>
</form>
<nav id="sidebar" class="collapse sidebar bg-dark text-white p-3 d-md-block"> -->
    ...
  <!-- </nav> -->
    
   
</form>

<h2>Submitted Data</h2>
<div id="submissions" style="margin-top: 20px; font-family: Arial, sans-serif;"></div>

<p id="responseMessage" style="margin-top: 10px; color: green;"></p>
</div>

<body>
  <h1>Welcome, <span id="username">User</span></h1>
  <h2>Your Lesson Plan</h2>
  <table id="lesson-plan-table">
    <thead>
      <tr>
        <th>Lesson Name</th>
        <th>Lesson Date</th>
        <th>Lesson Details</th>
      </tr>
    </thead>
    <tbody>
      <!-- Lesson plan data will go here -->
    </tbody>
  </table>
<!-- 
<form id="lessonForm">
  <label for="lessonName">Lesson Name:</label>
  <input type="text" id="lessonName" required><br>
  
  <label for="lessonDate">Lesson Date:</label>
  <input type="date" id="lessonDate" required><br>
  
  <label for="lessonDetails">Lesson Details:</label>
  <textarea id="lessonDetails" required></textarea><br>

  <button type="submit">Add Lesson</button>
</form>

<script>


lessonForm.addEventListener('submit', function(event) {
    event.preventDefault();

    const lessonName = document.getElementById('lessonName').value;
    const lessonDate = document.getElementById('lessonDate').value;
    const lessonDetails = document.getElementById('lessonDetails').value;

    // Send POST request to add the lesson plan
    fetch('/addLessonPlan', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ // Replace with actual username or get it from session
        lessonName: lessonName,
        lessonDate: lessonDate,
        lessonDetails: lessonDetails
      })
    })
    .then(response => response.json())
    .then(data => {
      alert('Lesson added successfully');
      // Optionally, you could also update the table here without a page reload
    })
    .catch(error => console.error('Error adding lesson:', error));
  });
</script>

<form id="lessonForm">
  <label for="lessonName">Lesson Name:</label>
  <input type="text" id="lessonName" required><br>

  <label for="lessonDate">Lesson Date:</label>
  <input type="date" id="lessonDate" required><br>

  <label for="lessonDetails">Lesson Details:</label>
  <textarea id="lessonDetails" required></textarea><br>

  <button type="submit">Add Lesson</button>
</form>

<script> -->
  <script>
  // Get username from the session or input (make sure to replace this with actual data)
  const username = request.session.username; //NOT WORKING

  document.getElementById('lessonForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const lessonName = document.getElementById('lessonName').value;
    const lessonDate = document.getElementById('lessonDate').value;
    const lessonDetails = document.getElementById('lessonDetails').value;

    // Send POST request to add the lesson plan
    fetch('/addLessonPlan', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        lessonName: lessonName,
        lessonDate: lessonDate,  // Send the date string directly
        lessonDetails: lessonDetails,
        username: username       // Include the username
      })
    })
    .then(response => response.json())
    .then(data => {
      alert('Lesson added successfully');
    })
    .catch(error => console.error('Error adding lesson:', error));
  });
</script>




<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>
